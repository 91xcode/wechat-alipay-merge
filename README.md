# wechat-alipay-merge

【支付宝】【微信】账单合并，生成【钱迹】模版 excel 文件

## 目录结构

```text
.
├── README.md            # 项目说明文件
├── category.yaml        # 分类配置文件
├── data
│   ├── alipay           # 支付宝账单位置
│   ├── result           # 合并账单位置
│   └── wechat           # 微信账单位置
├── main.py              # 合并账单程序
└── requirements.txt     # 项目依赖
```

## 安装依赖

```bash
pip3 install -r requirements.txt
```

## 使用流程

### 一、下载账单

> 微信账单

1. 进入手机微信，选择「我」，进入用户中心界面，然后点击「支付」选项；
2. 点击「钱包」，进入钱包界面后，点击右上角的「账单」按钮；
3. 点击右上角「常见问题」，点击「下载账单」->「用于个人对账」；
4. 自定义账单时间，然后点击「下一步」；
5. 填写要导出的邮箱（微信会把账单发送到你填写的邮箱），点击「下一步」；
6. 输入支付密码，提示申请已提交，微信官方会给你发送一条消息，里面有账单的解压码；
7. 前往你的邮箱下载得到压缩包，用解压码解压得到 「.csv」 格式微信账单，导出成功；
8. 将「.csv」文件复制或移动到 「data/wechat」目录下即可。

> 支付宝账单

1. 电脑浏览器中打开支付宝官网 [https://www.alipay.com/](https://www.alipay.com/)
2. 点击右上角「客户服务」->「自助服务」；
3. 在「交易服务」中点击「交易记录」一项；
4. 扫码登录；
5. 选择交易时间，并选择下载 excel 格式，得到 「.zip」 压缩包；
6. 解压压缩包得到「.csv」格式的支付宝账单，导出成功。
7. 将「.csv」文件复制或移动到 「data/alipay」目录下即可。

> PS: 商家用户请勿从商家中心导出，否则数据格式不同无法使用本程序导入账单。请按以上步骤或切换至个人版页面导出。

### 二、运行主程序

```bash
python3 main.py
```

### 三、根据输出的结果，修改分类配置

配置文件: `category.yaml`

### 四、重复第二、第三步骤完善合并分类结果
